<center><h1>Go语言学习

> 指针/nil/声明变量/new

`指针`:

也是一种数据类型，用来指向一块内存地址的

指针的使用是希望节省内存使用的。当数据相同的时候，存储数据的那块内存地址是不需要改变的，唯一需要改变的就是变量指向的存储真正数据地址的那块内存区域。 

```go
// 声明一个指针 
var v3 *int

// 创建一个数据类型，返回一个指针
v4：= new(int)
```

`声明变量`：

```go
var v1 int 

v2 := 10
```

通过以上两种方式声明变量的时候，会首先开辟一块内存空间 并且存储对应的值，然后使用变量名指向存储数据所在的内存地址。

**不同点**：

1. 使用指针，表示当前变量指向的内存地址中，存储的是一个内存地址，这个内存地址，存储的才是实际的值。

![image-20200812221853823](/Users/wangdong/Library/Application Support/typora-user-images/image-20200812221853823.png)

2. 使用new方式创建的指针，会自动帮助我们进行变量类型的初始化操作，会初始化为对应类型的"零值"
3. 使用*int这种方式，创建的指针，不会自动的帮助我们进行变量的初始化操作，变量指向的内存地址，存储的是一个内存地址，这个内存地址，指向的是nil所在的内存地址。
4.  nil在Golang中可以被所有类型的空值共同使用。指向的全是同一个内存地址。

`new`:

创建内存并且运行内部数据初始化，返回一个指针类型。

`nil`: 

Go语言中的空值，一般来说创建指针的时候会指向他。

> 超大整型

1. 如果你希望使用的int类型的范围大于int64所能表示的范围的话，就需要用到超大整型。
2. 使用方式

```go
// 第一步：创建一个超大整型的对象
var v1 big.Int

// 创建一个bigInt类型的指针(在创建超大整型的时候的推荐方式)
v2 := new(big.Int)

// 在超大整型的对象中写入值
v1.SetInt64()  -> 将整型写入
v1.SetString() -> 将字符串类型写入 
```

3. 基本的运算

    + 加

    ```go
    // 创建一个超大整型的指针
    n1 : new(big.Int)
    n1.SetInt64(88)
    
    -> 等效形式: big.NewInt(88),同时创建一个指针，并且写入一个新的值
    
    // 创建以恶搞超大整型的指针
    n2 : new(big.Int)
    n2.SetInt64(99)
    
    // 创建变量，用来存储结果
    result : new(big.Int)
    
    // 将n1和n2相加，并且将结果赋值给result
    result.Add(n1, n2)
    ```

    + 减

    ```go
    result.Sub()
    ```

    + 乘

    ```go
    result.Mul()
    ```

    + 除

    ```go
    result.Div() // 只能得到商
    
    result.DivMod(被除数，除数，商) // 可以取到商和余数
    ```

> 浮点型

1. 计算机中小数的表示方式。
2. `Go语言中提供的两种浮点类型`:
    + float32：用32位(4个字节)存储浮点型
    + float64：用64位(8个字节)存储浮点型，存储的数据区间更大。

> float底层存储原理

```go
var price float32 = 39.29
```

`第一步`：将浮点型转换为二进制类型

+ 整数部分:直接转换为二进制
+ 小数部分:不是直接转换，小数部分一直*2，如果乘2结果小于1，结果继续乘2，结果大于1，就减1后再乘2，等于1的时候，结束计算
+ 最后将乘2的结果的整数部分拼接起来就是小数部分转换后的二进制的值。

`第二步`:将二进制的值转换为科学计数法

+ 整数部分转换为1，移动的位置转换为2**n次方

`存储数据`：float32为例，32位存储浮点类型

第一位表示符号，0表示正数，1表示负数

第二位表示指数：存储科学计数法的指数部分，需要将指数部分的值+127，然后转换为二进制的值，存储到第二位中去。

第三位表示小数点后的所有数据，只存储23位，超过23位的数字被丢弃。

> decimal类型 

1. 提供精确的小数处理，Go语言内置没有decimal，在第三方中可以找到。

`安装第三方包`

```go
go get github.com/shopspring/decimal
```

`go get`命令默认的行为是:下载源码到src的目录中。并且执行go install 将编译生成的第三方包放到pkg目录下。

2. `decimal包的简单使用`:

```go
package main

import (
	"fmt"
	"github.com/shopspring/decimal"
)

func main() {
	var v1 = decimal.NewFromFloat(0.9999)
	var v2 = decimal.NewFromFloat(0.29)

	// 加
	fmt.Println(v1.Add(v2))

	// 减
	fmt.Println(v1.Sub(v2))

	// 乘
	fmt.Println(v1.Mul(v2))

	// 除
	fmt.Println(v1.Mod(v2))

	// 四舍五入,保留两位小数
	fmt.Println(v1.Round(2))

	// 保留两位小数，不做四舍五入
	fmt.Println(v1.Truncate(2))
}
```

> 布尔类型